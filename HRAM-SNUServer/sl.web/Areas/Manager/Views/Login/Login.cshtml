@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <title>系统登录</title>
    <link rel="stylesheet" type="text/css" href="~/Scripts/easyui/themes/icon.css" />
    <link rel="stylesheet" type="text/css" href="~/Scripts/easyui/themes/bootstrap/easyui.css" />
    <link rel="stylesheet" type="text/css" href="~/Scripts/easyui/themes/extIcon.css" />
    <script type="text/javascript" src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="~/Scripts/easyui/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="~/Scripts/easyui/functions.js"></script>
    <script type="text/javascript">
        $(function () {
            $('#loginDialog').show().dialog({
                modal: true,
                closable: false,
                iconCls: 'ext-icon-lock_open',
                buttons: [{
                    id: 'loginBtn',
                    text: '登录',
                    iconCls: 'ext-icon-accept',
                    handler: function () {
                        loginFun();
                    }
                }],
                onOpen: function () {
                    $('form :input:first').focus();
                    $('form :input').keyup(function (event) {
                        if (event.keyCode == 13) {
                            loginFun();
                        }
                    });
                }
            });
            var loginFun = function () {
                var loginBtn = $("#loginBtn");
                loginBtn.linkbutton('disable');
                var url = "@Url.Action("LoginCheck", "Login")";
                $.post(url, $(".form").serialize(), function(data) {
                    if(data.state!="1") {
                        $.messager.alert("友情提示",data.message);
                        loginBtn.linkbutton('enable');
                    }else {
                        location.href = data.message;
                    }
                },"json");
            };
        });
    </script>

    
</head>
<body>

    <div id="loginDialog" title="系统登录" style="display: none; width: 300px; height: 200px;overflow: hidden;">
        <form method="post" class="form">
            <table style="width:100%;height:100%">
                <tr style="height:30%">
                    <th style="width: 30%;text-align: right;">登录名：</th>
                   
                    <td style="width: 60%; margin-right:10%">
                        <input name="loginName" class="easyui-textbox" style="width: 100%;" />
                    </td>
                </tr>
                <tr style="height:30%">
                    <th style="text-align: right; width: 30%;">
                        密码：
                    </th>
                    <td style="width: 60%; margin-right: 10%">
                        <input name="loginPwd" type="password" class="easyui-textbox" style="width: 100%;" />
                    </td>
                </tr>
                <tr style="height:40%">
                    <th style="text-align: right; width: 30%;">
                        验证码：
                    </th>

                    <td style="width: 60%; margin-right: 10%;">
                        <input name="checkCode" class="easyui-textbox" style="width: 50%;" oninput="if(value.length>5)value=value.slice(0,5)" " />
                        <img id="GL_StandardCode" style="cursor: pointer; width: 40%;vertical-align:middle" src="@Url.Action("VerifyCode", "Login")?t=@DateTime.Now.Ticks" title="看不清，点击换一张" />
                    </td>
                </tr>
            </table>
        </form>
    </div>

</body>
</html>

<script>
        $("#GL_StandardCode").click(function () {
            var newSrc = "@Url.Action("VerifyCode", "Login")" + "?t=" + (new Date()).getTime();
            this.src=newSrc;
            return false;
        });
</script>
